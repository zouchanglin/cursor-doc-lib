# 镜像构建与推送操作指南

这是容器平台的详细操作文档，包含登录系统、手动构建镜像与手动推送第三方镜像服务。

## 1. 前置操作

### 1.1 登录系统

- 使用浏览器访问 http://hub.tal.com
- 确保系统中存在您的用户信息

### 1.2 准备命名空间

- 选择以下任一方式：
  a) 自行创建新的命名空间
  b) 使用已存在的命名空间
- 注意：如果已存在的命名空间没有权限，或者新创建的命名空间在容器平台无法看到，请联系系统管理员解决

## 2. 手动构建镜像

### 2.1 登录 Docker Registry

```bash
docker login hub.tal.com -u {用户名}
```

注：用户名为邮箱前缀，使用 GitLab 用户名和密码登录

### 2.2 构建镜像

在包含 Dockerfile 的目录下执行：

```bash
docker build . -t hub.tal.com/{命名空间}/{镜像名称}:{镜像版本}
```

### 2.3 推送镜像

```bash
docker push hub.tal.com/{命名空间}/{镜像名称}:{镜像版本}
```

## 3. 从官方转存镜像（以 ubuntu:20.04 为例）

### 3.1 登录 Docker Registry

```bash
docker login hub.tal.com -u {用户名}
```

注：用户名为邮箱前缀，使用 GitLab 用户名和密码登录

### 3.2 从官方拉取镜像到本地

```bash
docker pull ubuntu:20.04
```

### 3.3 本地镜像重命名

```bash
docker tag ubuntu:20.04 hub.tal.com/{命名空间}/{镜像名称}:{镜像版本}
```

### 3.4 推送镜像

```bash
docker push hub.tal.com/{命名空间}/{镜像名称}:{镜像版本}
```

---

## 注意事项

1. 确保在执行操作前已经获得了必要的权限。
2. 命名空间、镜像名称和版本号应遵循公司的命名规范。
3. 如遇到权限问题或其他技术难题，请及时联系系统管理员或相关技术支持人员。
4. 推送大型镜像时，请确保网络稳定，并预留足够的时间。